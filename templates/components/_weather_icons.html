{# Weather Icons Macros #}
{# Usage: {% from "components/_weather_icons.html" import get_weather_icon %} #}
{# Then: {{ get_weather_icon(forecast.period.shortForecast, forecast.period.isDaytime) }} #}

{% macro icon_sun() %}
<svg class="now-icon" viewBox="0 0 24 24" fill="currentColor">
  <circle cx="12" cy="12" r="5"/>
  <g stroke="currentColor" stroke-width="2" stroke-linecap="round">
    <line x1="12" y1="1" x2="12" y2="4"/>
    <line x1="12" y1="20" x2="12" y2="23"/>
    <line x1="4.22" y1="4.22" x2="6.34" y2="6.34"/>
    <line x1="17.66" y1="17.66" x2="19.78" y2="19.78"/>
    <line x1="1" y1="12" x2="4" y2="12"/>
    <line x1="20" y1="12" x2="23" y2="12"/>
    <line x1="4.22" y1="19.78" x2="6.34" y2="17.66"/>
    <line x1="17.66" y1="6.34" x2="19.78" y2="4.22"/>
  </g>
</svg>
{% endmacro %}

{% macro icon_moon() %}
<svg class="now-icon" viewBox="0 0 24 24" fill="currentColor">
  <path d="M12 3a9 9 0 1 0 9 9c0-.46-.04-.92-.1-1.36a5.389 5.389 0 0 1-4.4 2.26 5.403 5.403 0 0 1-3.14-9.8c-.44-.06-.9-.1-1.36-.1z"/>
</svg>
{% endmacro %}

{% macro icon_cloud() %}
<svg class="now-icon" viewBox="0 0 24 24" fill="currentColor">
  <path d="M19.35 10.04A7.49 7.49 0 0 0 12 4C9.11 4 6.6 5.64 5.35 8.04A5.994 5.994 0 0 0 0 14c0 3.31 2.69 6 6 6h13c2.76 0 5-2.24 5-5 0-2.64-2.05-4.78-4.65-4.96z"/>
</svg>
{% endmacro %}

{% macro icon_rain() %}
<svg class="now-icon" viewBox="0 0 24 24" fill="currentColor">
  <path d="M17.66 8A6.002 6.002 0 0 0 6.13 8 4.5 4.5 0 0 0 6 17h11.5a3.5 3.5 0 0 0 .16-7z"/>
  <g stroke="currentColor" stroke-width="1.5" stroke-linecap="round" fill="none">
    <line x1="9" y1="19" x2="8" y2="22"/>
    <line x1="12" y1="19" x2="11" y2="22"/>
    <line x1="15" y1="19" x2="14" y2="22"/>
  </g>
</svg>
{% endmacro %}

{% macro icon_snow() %}
<svg class="now-icon" viewBox="0 0 24 24" fill="currentColor">
  <path d="M17.66 8A6.002 6.002 0 0 0 6.13 8 4.5 4.5 0 0 0 6 17h11.5a3.5 3.5 0 0 0 .16-7z"/>
  <circle cx="8" cy="20" r="1.2"/>
  <circle cx="12" cy="21" r="1.2"/>
  <circle cx="16" cy="20" r="1.2"/>
</svg>
{% endmacro %}

{% macro icon_storm() %}
<svg class="now-icon" viewBox="0 0 24 24" fill="currentColor">
  <path d="M17.66 8A6.002 6.002 0 0 0 6.13 8 4.5 4.5 0 0 0 6 15h3.5l-2 5 5-4h-2l2.5-4H17.5a3.5 3.5 0 0 0 .16-5z"/>
</svg>
{% endmacro %}

{% macro icon_fog() %}
<svg class="now-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round">
  <line x1="3" y1="8" x2="21" y2="8"/>
  <line x1="3" y1="12" x2="21" y2="12"/>
  <line x1="3" y1="16" x2="17" y2="16"/>
</svg>
{% endmacro %}

{% macro icon_wind() %}
<svg class="now-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
  <path d="M9.59 4.59A2 2 0 1 1 11 8H2"/>
  <path d="M12.59 19.41A2 2 0 1 0 14 16H2"/>
  <path d="M17.73 7.73A2.5 2.5 0 1 1 19.5 12H2"/>
</svg>
{% endmacro %}

{% macro icon_partly_cloudy_day() %}
<svg class="now-icon" viewBox="0 0 24 24" fill="currentColor">
  <circle cx="10" cy="6" r="3"/>
  <g stroke="currentColor" stroke-width="1.5" stroke-linecap="round">
    <line x1="10" y1="1" x2="10" y2="2"/>
    <line x1="15.5" y1="3.5" x2="14.8" y2="4.2"/>
    <line x1="17" y1="6" x2="16" y2="6"/>
    <line x1="4.5" y1="3.5" x2="5.2" y2="4.2"/>
    <line x1="3" y1="6" x2="4" y2="6"/>
  </g>
  <path d="M18.8 13A4.5 4.5 0 0 0 10.5 13.5 3.5 3.5 0 1 0 10.5 20.5h8a3 3 0 0 0 .3-6z"/>
</svg>
{% endmacro %}

{% macro icon_partly_cloudy_night() %}
<svg class="now-icon" viewBox="0 0 24 24" fill="currentColor">
  <path d="M10 2a5 5 0 0 0 5 5c-.3-1.8-.1-3.5.5-5a5 5 0 0 0-5.5 0z"/>
  <path d="M18.8 13A4.5 4.5 0 0 0 10.5 13.5 3.5 3.5 0 1 0 10.5 20.5h8a3 3 0 0 0 .3-6z"/>
</svg>
{% endmacro %}

{% macro get_weather_icon(forecast_text, is_daytime=true) %}
  {% set text = (forecast_text or '')|lower %}
  {% if 'thunder' in text or 'storm' in text or 't-storm' in text %}
    {{ icon_storm() }}
  {% elif 'snow' in text or 'flurr' in text or 'blizzard' in text or 'sleet' in text %}
    {{ icon_snow() }}
  {% elif 'rain' in text or 'shower' in text or 'drizzle' in text %}
    {{ icon_rain() }}
  {% elif 'fog' in text or 'mist' in text or 'haze' in text or 'smoke' in text %}
    {{ icon_fog() }}
  {% elif 'wind' in text or 'breezy' in text or 'blustery' in text %}
    {{ icon_wind() }}
  {% elif 'partly' in text or 'mostly sunny' in text or 'mostly clear' in text %}
    {% if is_daytime %}
      {{ icon_partly_cloudy_day() }}
    {% else %}
      {{ icon_partly_cloudy_night() }}
    {% endif %}
  {% elif 'cloud' in text or 'overcast' in text %}
    {{ icon_cloud() }}
  {% elif 'sun' in text or 'clear' in text or 'fair' in text %}
    {% if is_daytime %}
      {{ icon_sun() }}
    {% else %}
      {{ icon_moon() }}
    {% endif %}
  {% elif 'hot' in text %}
    {{ icon_sun() }}
  {% else %}
    {{ icon_cloud() }}
  {% endif %}
{% endmacro %}
