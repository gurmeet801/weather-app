{# Current Weather Card Component #}
{# Variables: forecast (required) #}
{% set feels_value = forecast.feels_like_temperature or forecast.period.temperature %}
{% set actual_value = forecast.actual_temperature or forecast.period.temperature %}
{% set unit = forecast.feels_like_unit or forecast.period.temperatureUnit %}
{% set advisory = namespace(found=false) %}
{% if forecast.alerts %}
  {% for alert in forecast.alerts %}
    {% if alert.event and "Advisory" in alert.event %}
      {% set advisory.found = true %}
    {% endif %}
  {% endfor %}
{% endif %}
<section class="card now-card" style="--delay: 0.05s;">
  <div class="now-header">
    <div>
      <div class="now-temp">{{ feels_value }}&deg;</div>
      <div class="now-sub">Actual {{ actual_value }}&deg;{{ unit }}</div>
      {% if advisory.found %}
      <div class="now-advisory advisory-blink">See advisory below</div>
      {% endif %}
    </div>
    <div class="now-aside">
      <svg class="now-icon" viewBox="0 0 24 24" fill="currentColor">
        <path d="M3 15h18v2H3v-2zm0 4h18v2H3v-2zm0-8h18v2H3v-2zm0-4h14v2H3V7z"/>
      </svg>
      <div class="now-condition">{{ forecast.period.shortForecast }}</div>
    </div>
  </div>
  <div class="stats-grid">
    <div class="stat">
      <div class="stat-value">
        {{ forecast.period.windSpeed }}{% if forecast.period.windDirection %} {{ forecast.period.windDirection }}{% endif %}
      </div>
      <div class="stat-label">Wind</div>
    </div>
    <div class="stat">
      <div class="stat-value">
        {% if forecast.humidity is not none %}{{ forecast.humidity }}%{% else %}--{% endif %}
      </div>
      <div class="stat-label">Humidity</div>
    </div>
    <div class="stat">
      <div class="stat-value">
        {% if forecast.precip_chance is not none %}{{ forecast.precip_chance }}%{% else %}--{% endif %}
      </div>
      <div class="stat-label">Precip</div>
    </div>
  </div>
</section>
